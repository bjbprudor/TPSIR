/*C3*/SET SCHEMA PUBLIC
create table Chauffage (idChauffage bigint generated by default as identity (start with 1), nom varchar(255), reference varchar(255), primary key (idChauffage))
create table ElectronicDevice (idElectro bigint generated by default as identity (start with 1), conso float not null, nom varchar(255), primary key (idElectro))
create table Person (idPerson bigint generated by default as identity (start with 1), nom varchar(255), prenom varchar(255), primary key (idPerson))
create table Residence (idResidence bigint generated by default as identity (start with 1), nbpiece integer not null, taille float not null, primary key (idResidence))
INSERT INTO CHAUFFAGE VALUES(1,'ch1','150CH')
INSERT INTO CHAUFFAGE VALUES(2,'ch2','149Z')
INSERT INTO ELECTRONICDEVICE VALUES(1,18.0E0,'TV')
INSERT INTO ELECTRONICDEVICE VALUES(2,25.0E0,'Fridge')
INSERT INTO RESIDENCE VALUES(1,2,20.0E0)
INSERT INTO RESIDENCE VALUES(2,5,42.0E0)
INSERT INTO PERSON VALUES(1,'Elkamali','Youssef')
INSERT INTO PERSON VALUES(2,'Prudor','Bastien')
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
DROP TABLE ELECTRONICDEVICE
/*C6*/SET SCHEMA PUBLIC
create table ElectronicDevice (id bigint generated by default as identity (start with 1), conso float not null, nom varchar(255), primary key (id))
alter table ElectronicDevice add constraint FK3D854129B928B57 foreign key (id) references Residence
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
alter table Residence add column person_idPerson bigint
alter table Residence add constraint FKF60C7AE6A6D3E1B9 foreign key (person_idPerson) references Person
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
alter table Chauffage add column residence_idResidence bigint
alter table ElectronicDevice add column residence_idResidence bigint
alter table Chauffage add constraint FKDA13F066592BACE foreign key (residence_idResidence) references Residence
alter table ElectronicDevice add constraint FK3D85412592BACE foreign key (residence_idResidence) references Residence
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
alter table Person add column person_id bigint
alter table Residence add column person_id bigint
alter table Person add constraint FK8E4887752BBDCE24 foreign key (person_id) references Person
alter table Residence add constraint FKF60C7AE62BBDCE24 foreign key (person_id) references Person
DISCONNECT
/*C2*/DISCONNECT
